
nameid=Common_Assault_Gunnery
descid=Common_Assault_Gunnery

activationtype=on_off
casttarget.casttargets=area,soldier,cover
casttarget.targetside=enemy
casttarget.castrangeusageflags=clamp_pre_command,clamp_in_command
resourcecost.values=1.0,0
cooldown.values=5,0
globalcooldown.values=0.5,0
unpausecooldownstateid=postcast
animbodyregionlevel=2
commandbodyregionlevel=3
gunpositionid=pistol
category=ranged
weaponcategory=pistol
flags=caster_can_move_in_cast_command,movement,divide_resource
tags=long_range,salvo,spread,single_target,pistol

statecount=3
state[0].id=precast
state[0].animinfo.animtype=dual_shoot
state[0].animinfo.fromevent=shoot_begin
state[0].animinfo.toevent=raise_end
state[0].animinfo.endstateevent=state_end
state[0].flags=update_cast_target_from_command

state[1].id=default
state[1].duration.values=-1.0,0
state[1].animinfo.animtype=dual_shoot
state[1].animinfo.fromevent=raise_end
state[1].animinfo.toevent=unlock_command
state[1].animinfo.endstateevent=state_end
state[1].animinfo.animtime.values=0.06,0
state[1].animinfo.looping=1
state[1].flags=check_command,update_cast_target_from_command,caster_can_move,movement
state[1].unlockcommandevent=state_end

state[2].id=postcast
state[2].animinfo.animtype=dual_shoot
state[2].animinfo.fromevent=unlock_command
state[2].animinfo.pending=0

targetgroupcount=1
targetgroup[0].stateids=default
targetgroup[0].animevent=cast
targetgroup[0].targettype=magic
targetgroup[0].cleanuptargets=1

movercount=1
mover[0].type=follow_command_target
mover[0].stateids=precast,default
mover[0].movertarget=cast_position
mover[0].speed.values=12.0,0
mover[0].mindistance=4.0

actioncount=4
action[0].type=shoot
action[0].stateids=default
action[0].targetgroupindex=0
action[0].skill=Autopistol_Shoot_and_retreat__shot
action[0].spreadangle.values=15.0,0
action[0].gunlocation_linktarget=mainhand_artifact
action[0].gunlocation_linktos=socket_gun_end

action[1].type=shoot
action[1].stateids=default
action[1].targetgroupindex=0
action[1].skill=Autopistol_Shoot_and_retreat__shot
action[1].spreadangle.values=15.0,0
action[1].gunlocation_linktarget=offhand_artifact
action[1].gunlocation_linktos=socket_gun_end

action[2].type=move
action[2].stateids=default
action[2].targettype=caster
action[2].movedistance.values=10000.00,0
action[2].iswalking=true
action[2].timer.maxrefreshcount.values=1,0

action[3].type=shoot_effect_template
action[3].skill=templ__shoot_effect
action[3].torkolateffect_filename=Pistol_Skills\Auto_pistol\auto_pistol_torkolat.N2E
action[3].sound_eventname=event:/weapon/3p/auto_pistol
action[3].sound_eventname2d=event:/weapon/1p/auto_pistol
