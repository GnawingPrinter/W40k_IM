nameid=Common_Shoot_and_retreat
descid=Common_Shoot_and_retreat

activationtype=on_off
casttarget.casttargets=area,soldier,cover
casttarget.targetside=enemy
casttarget.castrangeusageflags=clamp_pre_command,clamp_in_command
resourcecost.values=1.0,0
cooldown.values=0.5,0
unpausecooldownstateid=postcast
animbodyregionlevel=2
category=ranged
weaponcategory=rifle
flags=instant_cast,movement
tags=long_range,salvo,spread_tight,single_target

aiinfo.aicategory=dont_cast

statecount=2
state[0].id=default
state[0].duration.values=-1.0,0
state[0].animinfo.animtype=rapid_fire
state[0].animinfo.fromevent=raise_end
state[0].animinfo.toevent=unlock_command
state[0].animinfo.animtime.values=0.5,0
state[0].animinfo.endstateevent=state_end
state[0].animinfo.looping=1
state[0].flags=check_command,update_cast_target_from_command
state[0].unlockcommandevent=state_end

state[1].id=postcast
state[1].animinfo.animtype=rapid_fire
state[1].animinfo.fromevent=shoot_begin
state[1].animinfo.fromevent=unlock_command

targetgroupcount=1
targetgroup[0].stateids=default
targetgroup[0].animevent=cast
targetgroup[0].targettype=magic
targetgroup[0].cleanuptargets=1

actioncount=3
action[0].type=shoot
action[0].stateids=default
action[0].targetgroupindex=0
action[0].skill=Sniper_rifle_Shoot_and_retreat__shot
action[0].spreadangle.values=4.0,0
action[0].gunlocation_linktarget=artifact
action[0].gunlocation_linktos=socket_gun_end

action[1].type=move
action[1].stateids=default
action[1].targettype=caster
action[1].movedistance.values=1.0,0
action[1].movetype=backward


action[2].type=shoot_effect_template
action[2].skill=templ__shoot_effect
action[2].torkolateffect_filename=Assassin_skills\Rifle\Sniper_rifle\sniper_rifle_single_shot_torkolat.N2E
action[2].sound_eventname=event:/weapon/3p/sniper_rifle
action[2].sound_eventname2d=event:/weapon/1p/sniper_rifle
