
activationtype=active
eots=positive(surprise_ambushing)

statecount=1
state[0].id=default
state[0].conditions=needs_caster_flag(ambushing)
state[0].duration.boosts=surprise_duration(1.00)

targetgroupcount=2
targetgroup[0].targettype=caster

targetgroup[1].targettype=event_targets
targetgroup[1].event=damage_dealt

targetfiltercount=1
targetfilter[0].filter=condition_target_group_must_be_empty
targetfilter[0].sourcetgindices=0,1

actioncount=5
action[0].type=modifier
action[0].timer.maxrefreshcount.values=1,0
action[0].targettype=caster
action[0].mod.prioritygroup=bonus_multiplier
action[0].mod.property=damage
action[0].mod.values=0.30,0
action[0].mod.boosts=surprise_damage_bonus(1.00)
action[0].mod.tag=suprise_damage_tag
action[0].mod.tagformatflags=percent
action[0].mod.tagmul=100

action[1].type=modifier
action[1].timer.maxrefreshcount.values=1,0
action[1].targettype=caster
action[1].mod.prioritygroup=bonus_fix
action[1].mod.property=critical_hit_chance_hardcap
action[1].mod.values=0.05,0
action[1].mod.tag=suprise_crit_tag
action[1].mod.tagformatflags=percent
action[1].mod.tagmul=100

action[2].type=modifier
action[2].timer.maxrefreshcount.values=1,0
action[2].targettype=caster
action[2].mod.prioritygroup=bonus_fix
action[2].mod.property=dodge_chance_hardcap
action[2].mod.values=0.30,0
action[2].mod.tag=suprise_dodge_tag
action[2].mod.tagformatflags=percent
action[2].mod.tagmul=100

action[3].type=token
action[3].targettype=caster
action[3].token=surprise_ambushing
action[3].tokenop=set

action[4].type=modifier
action[4].targetgroupindex=0
action[4].mod.prioritygroup=bonus_multiplier
action[4].mod.property=damage
action[4].mod.boosts=surprise_first_attack_bonus(1.00)
