
activationtype=active
casttarget.casttargets=soldier
casttarget.targetside=enemy
//casttarget.castrangemin.values=10.0,0
cooldown.values=30.0,0
animbodyregionlevel=3
category=melee
flags=dont_follow_target
tags=long_range

aiinfo.timetowaitbeforefirstcastsec=10

statecount=5
state[0].id=precast
state[0].animinfo.animname=charge_start
state[0].animinfo.endstateevent=cast
state[0].animinfo.animtime.values=3.5,0
state[0].unlockcommandevent=state_end

state[1].id=cast

state[2].id=default
state[2].conditions=needs_caster_flag(charge)
state[2].duration.values=2.0,0

state[3].id=postcast
state[3].animinfo.animname=charge_end
state[3].animinfo.animtime.values=1.0,0

state[4].id=charge_failed
state[4].conditionflags=charge_failed
state[4].duration.values=2.0,0

areacount=1
area[0].type=circle
area[0].radius.values=4.0,0
area[0].targettype=caster

targetgroupcount=2
targetgroup[0].targettype=event_targets
targetgroup[0].event=charge_collision
targetgroup[0].cleanuptargets=1

targetgroup[1].stateids=default
targetgroup[1].timer.period.values=0.1,0
targetgroup[1].areaindex=0
targetgroup[1].gatherflags=cover
targetgroup[1].targetside=none

actioncount=12
action[0].type=avoid_line
action[0].stateids=precast
action[0].timer.maxrefreshcount.values=1,0
action[0].targettype=caster
action[0].distance.values=30.0,0

action[1].type=set_flag
action[1].stateids=precast,cast,default
action[1].timer.maxrefreshcount.values=1,0
action[1].targettype=caster
action[1].soldierflag=charge
action[1].usesourceid=0
action[1].synctype=none

action[2].type=move
action[2].stateids=cast
action[2].targettype=caster
action[2].movedistance.values=30.0,0
action[2].movetype=charge

action[3].type=charge_collision
action[3].stateids=default
action[3].targetgroupindex=0
action[3].checkknockdown=1

action[4].type=damage
action[4].stateids=default
action[4].targetgroupindex=0
action[4].pertargetconditions=is_enemy
action[4].oncepertarget=1
action[4].damage.values=1800,0
action[4].maxdamage.values=2300,0
action[4].damagetypeweights=blunt

action[5].type=suppression
action[5].stateids=default
action[5].targetgroupindex=0
action[5].suppression.values=1000.0,0

action[6].type=knockdown
action[6].stateids=default
action[6].targetgroupindex=0
action[6].oncepertarget=1
action[6].force.values=20.0,0
action[6].pushaside=1
action[6].skill=debuff__knockdown

action[7].type=damage
action[7].stateids=default
action[7].targetgroupindex=1
action[7].oncepertarget=1
action[7].coverdamage.values=1000000,0
action[7].damagetypeweights=blunt

action[8].type=set_flag
action[8].stateids=charge_failed
action[8].timer.maxrefreshcount.values=1,0
action[8].targettype=caster
action[8].soldierflag=uncontrollable


action[9].type=effect
action[9].stateids=precast
action[9].targettype=caster
action[9].filename=Monster_skills\Hellbrute\Charge\helbrute_charge.N2E
action[9].linkdesc0.type=position
action[9].linkdesc0.flags=rotate
action[9].duration=-1.0

action[10].type=effect
action[10].stateids=default
action[10].targettype=caster
action[10].filename=Monster_skills\Leman_Russ_Demolisher\kipufogo_charge.N2E
action[10].linkdesc0.type=socket
action[10].linkdesc0.linktos=socket_exhaust1
action[10].linkdesc0.flags=update_on_gfx_thread,rotate
action[10].flags=attach,only_stop_emitting
action[10].duration=-1.0

action[11].type=effect
action[11].stateids=default
action[11].targettype=caster
action[11].filename=Monster_skills\Leman_Russ_Demolisher\kipufogo_charge.N2E
action[11].linkdesc0.type=socket
action[11].linkdesc0.linktos=socket_exhaust2
action[11].linkdesc0.flags=update_on_gfx_thread,rotate
action[11].flags=attach,only_stop_emitting
action[11].duration=-1.0
